function CicoolChatFilter(e){this.filterMessage={message:["filterImage","filterEmoji","filterYoutubeUrl"],liveMessage:["emojiLiveMessage"],chatLastMessage:["filterEmoji"]}}CicoolChatFilter.prototype.filterYoutubeUrl=function(e){return e.replace(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,'<iframe width="100%" height="200px" src="http://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>').replace(/(?:http:\/\/)?(?:www\.)?(?:vimeo\.com)\/(.+)/g,'<iframe src="//player.vimeo.com/video/$1" width="100%" height="200px" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')},CicoolChatFilter.prototype.isImage=function(e){var t=e.split(".").slice(-1)[0];return t=t.toLowerCase(),list_image_ext=["","png","jpg","jpeg","gif"],-1!=list_image_ext.indexOf(t)},CicoolChatFilter.prototype.getIconFile=function(e){var t=e.split(".").slice(-1)[0];t=t.toLowerCase();var i=BASE_URL+"asset/img/icon/any.png";return $.each({avi:["avi"],css:["css"],csv:["csv"],eps:["eps"],html:["html","htm"],jpg:["jpg","jpeg"],mov:["mov","mp4","3gp"],mp3:["mp3"],pdf:["pdf"],png:["png"],ppt:["ppt","pptx"],rar:["rar"],raw:["raw"],ttf:["ttf"],txt:["txt"],wav:["wav"],xls:["xls","xlsx","gsheet"],zip:["zip"],doc:["docx","doc","gdoc"]},function(e,a){-1!=a.indexOf(t)&&(i=BASE_URL+"asset/img/icon/"+e+".png")}),i},CicoolChatFilter.prototype.filterImage=function(e){reg=new RegExp(/\[image\=([0-9.\-A-Za-z]+)\]/gi);var t=this,i=e.match(reg);return $.each(i,function(i,a){var r=a.replace("[image=","").replace("]",""),o="";if(t.isImage(r)){var l=BASE_URL+"/uploads/chat/"+r;e=e.replace(a,'<a class="fancybox chat-image-funcy" href="'+l+'"> <img class="chat-image-attchment '+o+'" src="'+l+'"></a>')}else{o="attachement-files";var c=t.getIconFile(r);l=BASE_URL+"/uploads/chat/"+r;e=e.replace(a,'<a class="" href="'+l+'"><img class="chat-image-attchment '+o+'" src="'+c+'"></a>')}}),e},CicoolChatFilter.prototype.filterEmoji=function(e){return e=emojify.replace(e)},CicoolChatFilter.prototype.filter=function(e,t){var i=this;return $.each(i.filterMessage[t],function(t,a){e=i[a](e)}),e},CicoolChatFilter.prototype.emojiLiveMessage=function(e){return e.trim(),e=e.replace(/^( |<br>)*(.*?)( |<br>)*$/,"$2"),e=emojione.toShort(e),e=emojione.toShort(e),e=emojify.replace(e)};